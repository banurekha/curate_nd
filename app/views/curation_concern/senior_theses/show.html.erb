<% content_for :page_header do %>
  <h1><%= curation_concern.title %></h1>
<% end %>

<dl class="<%= dom_class(curation_concern) %> attributes">
  <dt>Abstract</dt>
  <dd><%= curation_concern.description %></dd>
  <dt>Permission</dt>
  <dd><%= link_to_edit_permissions(curation_concern) %></dd>
</dl>

<h2>Related Files</h2>
<%- generic_files_are_editable = can?(:edit, curation_concern) -%>
<table class="table table-striped <%= dom_class(curation_concern) %> related_files">
  <caption>Related Files</caption>
  <thead>
    <tr>
      <th>Related File</th>
      <th>Filename</th>
      <th>Date Uploaded</th>
      <th>Visibility</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% curation_concern.generic_files.each do |generic_file| %>
      <tr class="<%= dom_class(generic_file) %> attributes">
        <td class="attribute title"><%= generic_file %></td>
        <td class="attribute filename"><%= generic_file.filename %></td>
        <td class="attribute date_uploaded"><%= generic_file.date_uploaded %></td>
        <td class="attribute permission"><%= link_to_edit_permissions(generic_file) %></td>
        <td>
          <%= link_to 'Edit', edit_polymorphic_path([:curation_concern, generic_file]), class: 'btn' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% content_for :second_row do %>
  <% if can? :edit, curation_concern %>
    <div class="form-actions">
      <%= link_to "Edit This Senior Thesis", edit_polymorphic_path([:curation_concern, curation_concern]), class: 'btn btn-primary' %>
      <%= link_to "Add a Related File", new_curation_concern_generic_file_path(curation_concern), class: 'btn btn-primary' %>
    </div>
  <% end %>
<% end %>