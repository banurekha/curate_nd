<%- generic_files_are_editable = can?(:edit, curation_concern) -%>
<table class="table table-striped <%= dom_class(curation_concern) %> related_files">
  <caption><h2>Related Files</h2></caption>
  <thead>
  <tr>
    <th>Related File</th>
    <th>Filename</th>
    <th>Date Uploaded</th>
    <th>Visibility</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <% curation_concern.related_files.each do |generic_file| %>
    <tr class="<%= dom_class(generic_file) %> attributes">
      <td class="attribute title"><%= generic_file %></td>
      <td class="attribute filename"><%= generic_file.filename %></td>
      <td class="attribute date_uploaded"><%= generic_file.date_uploaded %></td>
      <td class="attribute permission"><%= link_to_edit_permissions(generic_file) %></td>
      <td>
        <%- if generic_files_are_editable -%>
          <%= link_to 'Edit This File', edit_polymorphic_path([:curation_concern, generic_file]), class: 'btn' %>
        <%- end -%>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
